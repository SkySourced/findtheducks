<!DOCTYPE html>
<html lang="en">
<head>    
<%- include("../templates/head") %>
</head>
<body>
    <%- include("../templates/header", {authorised, permissions}) %>
    <div class="content">
        <h1><%- user.username %></h1>
        <h3>Update username</h3>
        <p>Your username is only shown on the scoreboard.</p>
        <form action="/users/profile" method="POST">
            <input type="text" name="username" placeholder=<%= user.username %> required>
            <input type="submit" value="Update">
        </form>
        <h3>Update password</h3>
        <% if (status == "undefined") {
        } else if ( status !== "Success!") { %>
            <div class="alert alert-danger"><%= status %></div>
        <% } else { %>
            <div class="alert alert-success"><%= status %></div>
        <% } %>
        <form action="/users/password" method="POST">
            <label>Enter current password</label>
            <input type="password" name="oldPassword" required>
            <label>Enter new password</label>
            <input type="password" name="password" required>
            <label>Confirm new password</label>
            <input type="password" name="confirmPassword" required>
            <input type="submit" value="Update">
        </form>
        <h3>Ducks found</h3>
        <p>You've found <b><%- parsedFinds.length %></b> ducks.<br>For <b><%- firstFinds %></b> of those, you were the first.</p>
        <table>
            <tr>
            <th>Location Description</th>
            <th>Date Found</th>
            <th>First?</th>
            </tr>
            <% for(let i=0; i<parsedFinds.length; i++) { %>
                <tr>
                <td><%= parsedFinds[i].location %></td>
                <td><%= parsedFinds[i].date %></td>
                <td><%= parsedFinds[i] ? "âœ“" : "x" %></td>
                </tr>
            <% } %>
        </table>
    </div>
</body>
</html>